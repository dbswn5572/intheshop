<!doctype html>
<html lang="en">
{% include 'head.html' %}

<body class="text-center">

<div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
    <!-- Jinja2 -->
    {% include 'header.html' %}

    <main role="main" class="inner cover">
        <h1 class="cover-heading">in the shop</h1>
        <p class="lead">ì›í•˜ëŠ” ì œí’ˆì„ ê°€ì¥ ì €ë ´í•˜ê²Œ ì‚´ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” "in the shop" ì…ë‹ˆë‹¤. í•˜ë‹¨ì— ì œí’ˆëª…ê³¼ í¬ë§ê°€ë¥¼ ì…ë ¥í•˜ì‹œë©´
            í¬ë§ê°€ ì´í•˜ì˜ ë”œì´ ë“±ë¡ë  ê²½ìš°ì— ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.</p>
        <br>
    </main>

    <div class="container">
        <div class="card-deck mb-3 text-center">
            <div class="card mb-4 box-shadow">
                <div class="card-header">
                    <!--<h4 class="my-0 font-weight-normal">Free</h4>-->
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 100%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">
                            ìµœì €ê°€ ì•Œë¦¼ì€ ì¸ë”ìƒµí•´ì„œ í•´ê²° ğŸ‘ŒğŸ¼
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!--<h1 class="card-title pricing-cardtitle">$0 <small class="text-muted">/ mo</small></h1>-->
                    <div class="input-group mb-3">
                        <span class="input-group-text">ì œí’ˆëª…</span>
                        <input type="text" id="target" class="form-control" placeholder="ì›í•˜ëŠ” ë¸Œëœë“œì˜ ì œí’ˆëª…, ì½”ë“œ ë¬´ì—‡ì´ë“ !"
                               aria-label="Amount (to the nearest dollar)">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">í¬ë§ê°€</span>
                        <input type="text" id="price" class="form-control" placeholder="ì›í•˜ëŠ” ìµœì €ê°€ ì…ë ¥!"aria-label="Amount (to the nearest dollar)">
                        <span class="input-group-text">(ì›)</span>
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <div class="phone-num input-group-text">ì—°ë½ì²˜</div>
                        </div>
                        <input type="text" id="phone" class="form-control" placeholder="" id="order-phone">
                    </div>
                    <button type="button" onclick="makePush()" style="font-size: medium" class="btn btn-lg btn-block btn-outline-primary">@intheshop botì—ê²Œ ì•Œë¦¼ ìš”ì²­í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>
    <footer class="mastfoot mt-auto">
        <div class="inner">
            <p>by <a href="https://">@__yunnnjuoo</a>.</p>
        </div>
    </footer>
</div>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script>window.jQuery || document.write('<script src="../static/jquery-slim.min.js"><\/script>')</script>
<script src="../static/popper.min.js"></script>
<script src="../static/bootstrap.min.js"></script>
<script>
    function makePush(){
        let target = $('#target').val()
        console.log(target)
        let price = $('#price').val()
        console.log(price)
        let phone = $('#phone').val()
        console.log(phone)

        // ì…ë ¥ alert

        if (target === '') {
            alert("ì œí’ˆëª…ì„ ì…ë ¥í•˜ì‹œë©´ ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤!")
            return
        } else if (price === '') {
            alert("ì–¼ë§ˆì— ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦´ê¹Œìš”?.?")
            return
        } else if (!isCellPhone(phone)) {
            alert("ì—°ë½ì²˜ í˜•ì‹ì€ 010-XXXX-XXXXìœ¼ë¡œ ì…ë ¥í•´ì£¼ì‹¤ê»˜ìš”:)");
            return
         }

        // Push ì•Œë¦¼ ì €ì¥ ìš”ì²­
        $.ajax({
            type: "POST",
            url: "/push",
            data: {
                'target_give': target,
                'price_give': price,
                'phone_give': phone
            },
            success: function (response) {
                if (response["result"] == "success") {
                    alert(response["msg"]);
                    {#window.location.reload();#}
                    window.location.href = 'https://telegram.me/intheshop_bot';

                }
            }
        })

    }
    function isCellPhone(p) {
            p = p.split('-').join('');
            let regPhone = /^((01[1|6|7|8|9])[1-9]+[0-9]{6,7})|(010[1-9][0-9]{7})$/;
            return regPhone.test(p);
     }
</script>
</body>
</html>
